Use this recap to resume in a new session:
- Decks: Gemini-styled cases 1–11 live in src/data/case1Deck.ts–case11Deck.ts and ductalDeck.ts; slides remain raw HTML strings with interactive tiles on presenter where implemented.
- Presenter: PresenterSession renders slide HTML (trusted) with top bar controls, in-slide poll overlay (gated on showResults + responses), streamlined nav (arrows + Space), and interactive clue tiles for presenter; participants see static tiles. Poll responses use deterministic IDs uid_questionId under sessions/{sessionId}/responses.
- Admin: AdminDeckEditor offers templates (Phenotype/Poll/Image/Teaching Pearl), quick-insert snippets, paste-to-data-URL images (soft warning >2 MB + optional alt prompt), and a live presenter-style preview. Slides are edited as HTML strings; deck config saved to Firestore configs/deck.
- Firestore: Rules enforce auth; sessions allow creator/admin updates/deletes with validated fields (createdBy, joinCode, slides, questions, indices/flags immutable where required); responses enforce one doc per user/question via deterministic IDs; configs are admin-write-only. Permission model documented in firestore.rules.
- Recent changes: Added architecture doc, improved README/admin docs; documented permission model; tightened session schema validation in rules; added comments to key modules; aligned interactive tiles to shared ClueTile type; added Firestore rules Jest tests (use emulator on 127.0.0.1:8088/9188).
- Next actions: Consider participant interactivity for tiles if desired; keep images small or plan Storage uploads; real-room dry run with residents to validate presenter/admin UX; re-run rules suite with `firebase emulators:exec --only firestore --project cardioquest-live-test "npm test -- --runInBand"` (set FIRESTORE_EMULATOR_HOST=127.0.0.1:8088).
